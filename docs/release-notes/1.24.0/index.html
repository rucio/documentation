<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>1.24.0 &quot;Aquadonkey&quot; · Rucio Documentation</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Upgrade Instructions"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="1.24.0 &quot;Aquadonkey&quot; · Rucio Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://rucio.github.io/documentation/"/><meta property="og:description" content="## Upgrade Instructions"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/documentation/img/android-chrome-512x512.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="/documentation/css/custom.css"/><link rel="stylesheet" href="/documentation/prism/prism.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,700&amp;display=swap"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik:400,500,700&amp;display=swap"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code&amp;display=swap"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/documentation/prism/prism.js"></script><script src="/documentation/js/scrollSpy.js"></script><link rel="stylesheet" href="/documentation/css/main.css"/><script src="/documentation/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/documentation/"><img class="logo" src="/documentation/img/wide_logo2.png" alt="Rucio Documentation"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/documentation/docs/" target="_self">Docs</a></li><li class=""><a href="https://rucio.readthedocs.io/_/downloads/en/next/pdf/" target="_self">Downloads</a></li><li class=""><a href="https://arxiv.org/abs/1902.09857" target="_self">Scientific articles</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Ask me something" title="Ask me something"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">1.24.0 &quot;Aquadonkey&quot;</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="upgrade-instructions"></a><a href="#upgrade-instructions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Upgrade Instructions</h2>
<p>This feature release requires a database schema upgrade. Please consult the <a href="https://rucio.readthedocs.io/en/latest/database.html">documentation</a> about upgrading your database schema.</p>
<p>The following changes are necessary and are covered by the <code>alembic upgrade head</code> command:</p>
<ol>
<li>Adding missing indices which were only available as functional oracle indices. For oracle databases installed with the <a href="https://github.com/rucio/rucio/blob/master/etc/sql/oracle/schema.sql">schema.sql</a> definition, these should already exist (Please verify). (Alembic revision <code>8ea9122275b1</code>)</li>
</ol>
<ul>
<li>Adding <code>SUBSCRIPTIONS_STATE_IDX</code> on <code>subscriptions</code> table</li>
<li>Adding <code>CONTENTS_RULE_EVAL_FB_IDX</code> on <code>contents</code> table</li>
<li>Adding <code>REPLICAS_STATE_IDX</code> on <code>replicas</code> table</li>
<li>Adding <code>BAD_REPLICAS_ACCOUNT_IDX</code> on <code>bad_replicas</code> table</li>
<li>Adding <code>REQUESTS_DEST_RSE_ID_IDX</code> on <code>requests</code> table</li>
</ul>
<ol start="2">
<li>Update of <code>REQUESTS_STATE_CHK</code> constraint in <code>requests</code> table in preparation for Conveyor Preparer (Alembic revision <code>d23453595260</code>)</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="important-changes"></a><a href="#important-changes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Important changes</h2>
<ol>
<li><p>This Rucio release line drops support for Python 2.7 on the Server/Daemon Side. Only Python 3.6 and 3.7 are supported from now on. Rucio clients are still Python 2.7 compatible for the foreseen future (EOL will be announced). If your environment is requiring to run Rucio under Python 2.7 we recommend the Rucio 1.23 LTS release line, which will be supported until 2022.</p></li>
<li><p>Due to a fix (<a href="https://github.com/rucio/rucio/issues/3994">#3994</a>) in the salting-algorithm used for Python 3 all hashes for stored passwords in Rucio need to be re-collected. This only affects password authentication. X509, Kerberos or OIDC authentication is unaffected.</p></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="general"></a><a href="#general" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>General</h2>
<h3><a class="anchor" aria-hidden="true" id="features"></a><a href="#features" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Features</h3>
<ul>
<li>Core &amp; Internals: Add check that alembic version of DB works with rucio release <a href="https://github.com/rucio/rucio/issues/1157">#1157</a></li>
<li>Core &amp; Internals: Some function based indexes missing in models.py <a href="https://github.com/rucio/rucio/issues/2714">#2714</a></li>
<li>Core &amp; Internals: Policy packages should support multi-VO Rucio installations <a href="https://github.com/rucio/rucio/issues/3542">#3542</a></li>
<li>Core &amp; Internals: Provide a bulk method for setting metadata <a href="https://github.com/rucio/rucio/issues/3847">#3847</a></li>
<li>Database: Upgrade SQLAlchemy version <a href="https://github.com/rucio/rucio/issues/4055">#4055</a></li>
<li>Replicas: Allow declaring bad replicas via RSE/DID pair and REST API <a href="https://github.com/rucio/rucio/issues/4099">#4099</a></li>
<li>Transfers: Re-Write of Conveyor-Throttler and the throtteling system <a href="https://github.com/rucio/rucio/issues/4056">#4056</a></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="enhancements"></a><a href="#enhancements" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enhancements</h3>
<ul>
<li>Core &amp; Internals: Make tool execution-dir independent <a href="https://github.com/rucio/rucio/issues/4113">#4113</a></li>
<li>Core &amp; Internals: Hardcoded atlas-adc-ddm-support eMail address for rule approval <a href="https://github.com/rucio/rucio/issues/4164">#4164</a></li>
<li>Deletion: all_rses option redundant for light and dark reaper <a href="https://github.com/rucio/rucio/issues/3933">#3933</a></li>
<li>Release management: Upgrade information in setup.py (1.24.0) <a href="https://github.com/rucio/rucio/issues/4120">#4120</a></li>
<li>Release management: 1.24 Dependency upgrade <a href="https://github.com/rucio/rucio/issues/4157">#4157</a></li>
<li>Release management: Python memcached package <a href="https://github.com/rucio/rucio/issues/4169">#4169</a></li>
<li>Replicas: Set geoip as default sorting algorithm in list_replicas <a href="https://github.com/rucio/rucio/issues/4017">#4017</a></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="bugs"></a><a href="#bugs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bugs</h3>
<ul>
<li>Authentication &amp; Authorisation: Userpass authentication not backwards compatible nor unicode capable <a href="https://github.com/rucio/rucio/issues/3994">#3994</a></li>
<li>Clients: list_replicas returns a generator with an empty string when there are no replicas <a href="https://github.com/rucio/rucio/issues/2517">#2517</a></li>
<li>Core &amp; Internals: Clean URLs coming from AWS <a href="https://github.com/rucio/rucio/issues/4159">#4159</a></li>
<li>Core &amp; Internals: S3 endpoints in TPC must use s3s:// instead of s3:// <a href="https://github.com/rucio/rucio/issues/4173">#4173</a></li>
<li>DIRAC: Bug in Belle II permission for dirac <a href="https://github.com/rucio/rucio/issues/4174">#4174</a></li>
<li>Release management: Security upgrade for oic dependency <a href="https://github.com/rucio/rucio/issues/4181">#4181</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="clients"></a><a href="#clients" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Clients</h2>
<h3><a class="anchor" aria-hidden="true" id="bugs-1"></a><a href="#bugs-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bugs</h3>
<ul>
<li>Clients: Python3 client subparser failure <a href="https://github.com/rucio/rucio/issues/4202">#4202</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="webui"></a><a href="#webui" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebUI</h2>
<h3><a class="anchor" aria-hidden="true" id="enhancements-1"></a><a href="#enhancements-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enhancements</h3>
<ul>
<li>WebUI: Suspicious replicas page is hidden <a href="https://github.com/rucio/rucio/issues/4185">#4185</a></li>
<li>WebUI: RSE usage page uses obsolete SRM counter <a href="https://github.com/rucio/rucio/issues/4195">#4195</a></li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#upgrade-instructions">Upgrade Instructions</a></li><li><a href="#important-changes">Important changes</a></li><li><a href="#general">General</a><ul class="toc-headings"><li><a href="#features">Features</a></li><li><a href="#enhancements">Enhancements</a></li><li><a href="#bugs">Bugs</a></li></ul></li><li><a href="#clients">Clients</a><ul class="toc-headings"><li><a href="#bugs-1">Bugs</a></li></ul></li><li><a href="#webui">WebUI</a><ul class="toc-headings"><li><a href="#enhancements-1">Enhancements</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2021 CERN. Created with Docusaurus.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '04e5d623b96121df11ac440e51fc8956',
                indexName: 'rucio-cern',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>