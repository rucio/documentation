"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[67942],{22135(t,e,r){r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"operator_transfers/transfers-throttler","title":"Transfers Throttler","description":"As the name suggests, conveyor-throttler (transfer throttler) is used to","source":"@site/../docs/operator_transfers/transfers_throttler.md","sourceDirName":"operator_transfers","slug":"/operator_transfers/transfers-throttler","permalink":"/documentation/operator_transfers/transfers-throttler","draft":false,"unlisted":false,"editUrl":"https://github.com/rucio/documentation/tree/main/docs/../docs/operator_transfers/transfers_throttler.md","tags":[],"version":"current","lastUpdatedBy":"Anil Panta","lastUpdatedAt":1767982112000,"frontMatter":{"id":"transfers-throttler","title":"Transfers Throttler"},"sidebar":"docs","previous":{"title":"Transfers Submitter","permalink":"/documentation/operator_transfers/transfers-submitter"},"next":{"title":"rucio-abacus-account","permalink":"/documentation/bin/rucio-abacus-account"}}');var s=r(74848),o=r(28453);const i={id:"transfers-throttler",title:"Transfers Throttler"},a=void 0,l={},c=[];function u(t){const e={code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:["As the name suggests, ",(0,s.jsx)(e.code,{children:"conveyor-throttler"})," (transfer throttler) is used to\nprotect the transfertools from overload by limiting the number of submitter\ntransfers at any particular moment of time."]}),"\n",(0,s.jsx)(e.p,{children:"Preparer is required to be able to run throttler. See the preparer documentation\non how to activate it."}),"\n",(0,s.jsx)(e.p,{children:"The Rucio administrator must manually configure throttling rules.  As of time\nof writing, there is no CLI option in rucio-admin to do it. Rules have to be\nadded using the Rucio core functions directly from a Rucio node."}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Warning"}),": only set transfer limits if throttler is running. Otherwise,\npreparer will transition transfers to the ",(0,s.jsx)(e.code,{children:"waiting"})," state, but nobody will\nconsume the queue of waiting transfers. Leading to these transfers never\nbeing executed."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'from rucio.core.request import set_transfer_limit, list_transfer_limits\n\nlist(list_transfer_limits())\nset_transfer_limit("RSE1", max_transfers=100)\n'})}),"\n",(0,s.jsx)(e.p,{children:"The previous code snippet will create (or update) the 'destination' throttling\nrule for transfers towards RSE1. A maximum of 100 transfers will be allowed\nat a time towards RSE1. Note that \"RSE1\" here is an RSE expression, not\na name, complex RSE expressions can be used in rules. If more than one rule\napplies to a specific RSE, the more restrictive condition applies."}),"\n",(0,s.jsx)(e.p,{children:"Throttler supports some advanced throttler techniques. Some of them are:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"source throttling"}),"\n",(0,s.jsx)(e.li,{children:"grouping of files from the same dataset together (grouped_fifo strategy)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"These techniques can be costly on the database and were not extensively tested.\nThe only technique we use in production is destination throttling."})]})}function d(t={}){const{wrapper:e}={...(0,o.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(u,{...t})}):u(t)}},28453(t,e,r){r.d(e,{R:()=>i,x:()=>a});var n=r(96540);const s={},o=n.createContext(s);function i(t){const e=n.useContext(o);return n.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function a(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:i(t.components),n.createElement(o.Provider,{value:e},t.children)}}}]);