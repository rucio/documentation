"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[98328],{28453:(e,a,t)=>{t.d(a,{R:()=>o,x:()=>s});var n=t(96540);const d={},i=n.createContext(d);function o(e){const a=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:o(e.components),n.createElement(i.Provider,{value:a},e.children)}},92096:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"operator/opendata","title":"Opendata","description":"Rucio has native support for Opendata which was introduced in v38.0.0.","source":"@site/../docs/operator/opendata.md","sourceDirName":"operator","slug":"/operator/opendata","permalink":"/documentation/operator/opendata","draft":false,"unlisted":false,"editUrl":"https://github.com/rucio/documentation/tree/main/docs/../docs/operator/opendata.md","tags":[],"version":"current","lastUpdatedBy":"Maximilian Linhoff","lastUpdatedAt":1759478849000,"frontMatter":{"id":"opendata","title":"Opendata","sidebar_label":"Opendata"},"sidebar":"docs","previous":{"title":"Notifications","permalink":"/documentation/operator/notifications"},"next":{"title":"QoS RSE Configuration","permalink":"/documentation/operator/qos_rse_config"}}');var d=t(74848),i=t(28453);const o={id:"opendata",title:"Opendata",sidebar_label:"Opendata"},s=void 0,c={},l=[{value:"Opendata CLI",id:"opendata-cli",level:2},{value:"Adding a DID to the Opendata catalog",id:"adding-a-did-to-the-opendata-catalog",level:3},{value:"Updating an Opendata DID",id:"updating-an-opendata-did",level:3},{value:"Public Opendata",id:"public-opendata",level:2},{value:"REST API",id:"rest-api",level:2}];function r(e){const a={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(a.p,{children:["Rucio has native support for Opendata which was introduced in ",(0,d.jsx)(a.code,{children:"v38.0.0"}),".\nIt is an evolving feature and allows to tag already registered Rucio DIDs as Opendata and to add additional metadata (json-compatible).\nRucio is able to expose these Opendata DIDs in a dedicated Opendata endpont, returning useful information such as a list with all Opendata DIDs or the Opendata details of a given DID."]}),"\n",(0,d.jsx)(a.h2,{id:"opendata-cli",children:"Opendata CLI"}),"\n",(0,d.jsx)(a.h3,{id:"adding-a-did-to-the-opendata-catalog",children:"Adding a DID to the Opendata catalog"}),"\n",(0,d.jsx)(a.p,{children:"Any Rucio DID can be added to the Opendata catalog."}),"\n",(0,d.jsx)(a.p,{children:"This command will create a Rucio DID to use in this tutorial (skip if you already have some DIDs to work with)."}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-shell",children:"rucio scope add demo --account root\n\nDID=demo:demo-1\nrucio did add --type dataset $DID\n"})}),"\n",(0,d.jsx)(a.p,{children:"To add a DID to the Opendata catalog:"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-shell",children:"rucio opendata did add $DID\n"})}),"\n",(0,d.jsxs)(a.p,{children:["A list of all Opendata DIDs may be feched by the following command. It accepts additional option such as filters.\nSince the initial state of an Opendata DID is ",(0,d.jsx)(a.code,{children:"draft"}),", we can filter for that."]}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-shell",children:"rucio opendata did list --state draft\n"})}),"\n",(0,d.jsx)(a.p,{children:"We can also show details for a given Opendata DID"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-shell",children:"rucio opendata did show $DID --files --meta\n"})}),"\n",(0,d.jsxs)(a.p,{children:["this command supports multiple flags, such as ",(0,d.jsx)(a.code,{children:"files"})," used to list all the files for this DID or ",(0,d.jsx)(a.code,{children:"meta"})," to show Opendata metadata."]}),"\n",(0,d.jsxs)(a.p,{children:["The ",(0,d.jsx)(a.code,{children:"--public"})," flag can also be used to perform the request against the Opendata public endpoint. This will only work if the Opendata DID is marked as public in the Opendata catalog."]}),"\n",(0,d.jsx)(a.h3,{id:"updating-an-opendata-did",children:"Updating an Opendata DID"}),"\n",(0,d.jsx)(a.p,{children:"The Opendata DIDs can be enriched with some additional Opendata-specific data."}),"\n",(0,d.jsx)(a.p,{children:"A DOI can be added to the DID via"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-shell",children:"rucio opendata did update $DID --doi 10.1234/abcd.56789\n"})}),"\n",(0,d.jsx)(a.p,{children:"The DOI must be a valid DOI string and globally unique in the Rucio Opendata catalog."}),"\n",(0,d.jsx)(a.p,{children:"A JSON object may be added as Opendata metadata"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-shell",children:'rucio opendata did update $DID --meta \'{"key":"value"}\'\n'})}),"\n",(0,d.jsxs)(a.p,{children:["This Opendata metadata will be available in the ",(0,d.jsx)(a.code,{children:"show"})," command and in the"]}),"\n",(0,d.jsx)(a.h2,{id:"public-opendata",children:"Public Opendata"}),"\n",(0,d.jsxs)(a.p,{children:["An Opendata DID can be marked as ",(0,d.jsx)(a.code,{children:"public"}),".\nPublic Opendata DIDs will be exposed publicly in the Rucio server without the need of any kind of authentication."]}),"\n",(0,d.jsx)(a.p,{children:"In order to become public, the DID must be closed if not a file."}),"\n",(0,d.jsx)(a.p,{children:"A Rucio DID may be closed via the following command"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-shell",children:"rucio did update --close $DID\n"})}),"\n",(0,d.jsx)(a.p,{children:"After the DID is closed, it can be set to public via"}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-shell",children:"rucio opendata did update $DID --state public\n"})}),"\n",(0,d.jsxs)(a.p,{children:["An Opendata DID can be reverted to a non-public state by transferring it to the ",(0,d.jsx)(a.code,{children:"suspended"})," state."]}),"\n",(0,d.jsx)(a.pre,{children:(0,d.jsx)(a.code,{className:"language-shell",children:"rucio opendata did update $DID --state suspended\n"})}),"\n",(0,d.jsxs)(a.p,{children:["There is an exclusive Rucio endpoint for public Opendata called ",(0,d.jsx)(a.code,{children:"opendata_public"}),".\nFor production deployments we recommend a dedicated Rucio server with only the ",(0,d.jsx)(a.code,{children:"opendata_public"})," enabled, as this server instace is able to process unauthenticated requests.\nIf this server is accessible to other services related to Opendata such as the Opendata Portal, it can provide updated information related to the Opendata DIDs registered in Rucio."]}),"\n",(0,d.jsx)(a.h2,{id:"rest-api",children:"REST API"}),"\n",(0,d.jsxs)(a.p,{children:["The ",(0,d.jsx)(a.a,{href:"https://rucio.cern.ch/documentation/html/rest_api_doc.html#tag/Opendata",children:"REST API for Opendata"})," is available as part of the Rucio REST API documentation."]}),"\n",(0,d.jsx)(a.p,{children:"The most important feature is that users are able to send requests to the public opendata endpoint without any kind of autentication.\nThis can be used to establish synchronization between Rucio and a third party app such as an Opendata Portal."})]})}function p(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,d.jsx)(a,{...e,children:(0,d.jsx)(r,{...e})}):r(e)}}}]);