"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[32616],{76999:(e,r,l)=>{l.r(r),l.d(r,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"client_api/ruleclient","title":"RuleClient","description":"add\\\\replication\\\\rule","source":"@site/../docs/client_api/ruleclient.md","sourceDirName":"client_api","slug":"/client_api/ruleclient","permalink":"/documentation/client_api/ruleclient","draft":false,"unlisted":false,"editUrl":"https://github.com/rucio/documentation/tree/main/docs/../docs/client_api/ruleclient.md","tags":[],"version":"current","frontMatter":{"title":"RuleClient"},"sidebar":"docs","previous":{"title":"RSEClient","permalink":"/documentation/client_api/rseclient"},"next":{"title":"ScopeClient","permalink":"/documentation/client_api/scopeclient"}}');var o=l(74848),i=l(28453);const s={title:"RuleClient"},d=void 0,c={},t=[{value:"add_replication_rule",id:"add_replication_rule",level:2},{value:"delete_replication_rule",id:"delete_replication_rule",level:2},{value:"get_replication_rule",id:"get_replication_rule",level:2},{value:"update_replication_rule",id:"update_replication_rule",level:2},{value:"reduce_replication_rule",id:"reduce_replication_rule",level:2},{value:"move_replication_rule",id:"move_replication_rule",level:2},{value:"approve_replication_rule",id:"approve_replication_rule",level:2},{value:"deny_replication_rule",id:"deny_replication_rule",level:2},{value:"list_replication_rule_full_history",id:"list_replication_rule_full_history",level:2},{value:"examine_replication_rule",id:"examine_replication_rule",level:2},{value:"list_replica_locks",id:"list_replica_locks",level:2},{value:"list_replication_rules",id:"list_replication_rules",level:2}];function a(e){const r={code:"code",h2:"h2",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.h2,{id:"add_replication_rule",children:"add_replication_rule"}),"\n",(0,o.jsx)("span",{style:{"white-space":"pre"},children:(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsx)("tbody",{children:(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsxs)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:[(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"dids"}),": The data identifier set."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"copies"}),": The number of replicas."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"rse_expression"}),": Boolean string expression to give the list of RSEs."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"priority"}),": Priority of the transfers."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"lifetime"}),": The lifetime of the replication rules (in seconds)."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"grouping"}),": ALL -  All files will be replicated to the same RSE.\nDATASET - All files in the same dataset will be replicated to the same RSE.\nNONE - Files will be completely spread over all allowed RSEs without any grouping considerations at all."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"notify"}),": Notification setting for the rule (Y, N, C)."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"source_replica_expression"}),": RSE Expression for RSEs to be considered for source replicas."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"activity"}),": Transfer Activity to be passed to FTS."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"account"}),": The account owning the rule."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"meta"}),": Metadata, as dictionary."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"ignore_availability"}),": Option to ignore the availability of RSEs."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"purge_replicas"}),": When the rule gets deleted purge the associated replicas immediately."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"ask_approval"}),": Ask for approval of this replication rule."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"asynchronous"}),": Create rule asynchronously by judge-injector."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"locked"}),": If the rule is locked, it cannot be deleted."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"delay_injection"}),":"]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"comment"}),": Comment about the rule."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"weight"}),": If the weighting option of the replication rule is used, the choice of RSEs takes their weight into account."]})]})]})})})}),"\n",(0,o.jsx)(r.h2,{id:"delete_replication_rule",children:"delete_replication_rule"}),"\n",(0,o.jsxs)("span",{style:{"white-space":"pre"},children:[(0,o.jsx)(r.p,{children:"Deletes a replication rule and all associated locks."}),(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsxs)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:[(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"rule_id"}),": The id of the rule to be deleted"]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"purge_replicas"}),": Immediately delete the replicas."]})]})]}),(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Raises"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsx)(r.p,{children:"``: RuleNotFound, AccessDenied"})})]})]})})]}),"\n",(0,o.jsx)(r.h2,{id:"get_replication_rule",children:"get_replication_rule"}),"\n",(0,o.jsxs)("span",{style:{"white-space":"pre"},children:[(0,o.jsx)(r.p,{children:"Get a replication rule."}),(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"rule_id"}),": The id of the rule to be retrieved."]})})]}),(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Raises"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsx)(r.p,{children:"``: RuleNotFound"})})]})]})})]}),"\n",(0,o.jsx)(r.h2,{id:"update_replication_rule",children:"update_replication_rule"}),"\n",(0,o.jsx)("span",{style:{"white-space":"pre"},children:(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsxs)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:[(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"rule_id"}),": The id of the rule to be retrieved."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"options"}),": Options dictionary."]})]})]}),(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Raises"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsx)(r.p,{children:"``: RuleNotFound"})})]})]})})}),"\n",(0,o.jsx)(r.h2,{id:"reduce_replication_rule",children:"reduce_replication_rule"}),"\n",(0,o.jsx)("span",{style:{"white-space":"pre"},children:(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsxs)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:[(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"rule_id"}),": Rule to be reduced."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"copies"}),": Number of copies of the new rule."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"exclude_expression"}),": RSE Expression of RSEs to exclude."]})]})]}),(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Raises"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsx)(r.p,{children:"``: RuleReplaceFailed, RuleNotFound"})})]})]})})}),"\n",(0,o.jsx)(r.h2,{id:"move_replication_rule",children:"move_replication_rule"}),"\n",(0,o.jsxs)("span",{style:{"white-space":"pre"},children:[(0,o.jsx)(r.p,{children:"Move a replication rule to another RSE and, once done, delete the original one."}),(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsxs)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:[(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"rule_id"}),": Rule to be moved."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"rse_expression"}),": RSE expression of the new rule."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"override"}),": Configurations to update for the new rule."]})]})]}),(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Raises"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsx)(r.p,{children:"``: RuleNotFound, RuleReplaceFailed"})})]})]})})]}),"\n",(0,o.jsx)(r.h2,{id:"approve_replication_rule",children:"approve_replication_rule"}),"\n",(0,o.jsx)("span",{style:{"white-space":"pre"},children:(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"rule_id"}),": Rule to be approved."]})})]}),(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Raises"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsx)(r.p,{children:"``: RuleNotFound"})})]})]})})}),"\n",(0,o.jsx)(r.h2,{id:"deny_replication_rule",children:"deny_replication_rule"}),"\n",(0,o.jsx)("span",{style:{"white-space":"pre"},children:(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsxs)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:[(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"rule_id"}),": Rule to be denied."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"reason"}),": Reason for denying the rule."]})]})]}),(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Raises"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsx)(r.p,{children:"``: RuleNotFound"})})]})]})})}),"\n",(0,o.jsx)(r.h2,{id:"list_replication_rule_full_history",children:"list_replication_rule_full_history"}),"\n",(0,o.jsxs)("span",{style:{"white-space":"pre"},children:[(0,o.jsx)(r.p,{children:"List the rule history of a DID."}),(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsx)("tbody",{children:(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsxs)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:[(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"scope"}),": The scope of the DID."]}),(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"name"}),": The name of the DID."]})]})]})})})]}),"\n",(0,o.jsx)(r.h2,{id:"examine_replication_rule",children:"examine_replication_rule"}),"\n",(0,o.jsxs)("span",{style:{"white-space":"pre"},children:[(0,o.jsx)(r.p,{children:"Examine a replication rule for errors during transfer."}),(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"rule_id"}),": Rule to be denied."]})})]}),(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Raises"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsx)(r.p,{children:"``: RuleNotFound"})})]})]})})]}),"\n",(0,o.jsx)(r.h2,{id:"list_replica_locks",children:"list_replica_locks"}),"\n",(0,o.jsxs)("span",{style:{"white-space":"pre"},children:[(0,o.jsx)(r.p,{children:"List details of all replica locks for a rule."}),(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"rule_id"}),": Rule to be denied."]})})]}),(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Raises"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsx)(r.p,{children:"``: RuleNotFound"})})]})]})})]}),"\n",(0,o.jsx)(r.h2,{id:"list_replication_rules",children:"list_replication_rules"}),"\n",(0,o.jsxs)("span",{style:{"white-space":"pre"},children:[(0,o.jsx)(r.p,{children:"List all replication rules which match a filter"}),(0,o.jsx)("table",{style:{border:"none"},children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Arguments"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"filters"}),": dictionary of attributes by which the rules should be filtered"]})})]}),(0,o.jsxs)("tr",{style:{border:"none"},children:[(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Returns"}),":"]})}),(0,o.jsx)("td",{style:{border:"none",backgroundColor:"var(--ifm-background-color)",verticalAlign:"top"},children:(0,o.jsx)(r.p,{children:"True if successful, otherwise false."})})]})]})})]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453:(e,r,l)=>{l.d(r,{R:()=>s,x:()=>d});var n=l(96540);const o={},i=n.createContext(o);function s(e){const r=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);