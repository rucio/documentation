"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[72757],{28911(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"user/jupyter_extension_user","title":"Using the Rucio JupyterLab Extension","description":"The Rucio JupyterLab Extension brings scientific data management directly into your JupyterLab environment, allowing you to discover, access, and analyze datasets from Rucio data lakes without leaving the notebook interface.","source":"@site/../docs/user/jupyter_extension_user.md","sourceDirName":"user","slug":"/user/jupyter_extension_user","permalink":"/documentation/user/jupyter_extension_user","draft":false,"unlisted":false,"editUrl":"https://github.com/rucio/documentation/tree/main/docs/../docs/user/jupyter_extension_user.md","tags":[],"version":"current","lastUpdatedBy":"Anil Panta","lastUpdatedAt":1770224469000,"sidebarPosition":4,"frontMatter":{"id":"jupyter_extension_user","title":"Using the Rucio JupyterLab Extension","sidebar_label":"JupyterLab Extension","sidebar_position":4},"sidebar":"docs","previous":{"title":"Using the Client","permalink":"/documentation/user/using_the_client"},"next":{"title":"Using the Admin Client","permalink":"/documentation/user/using_the_admin_client"}}');var t=i(74848),r=i(28453);const a={id:"jupyter_extension_user",title:"Using the Rucio JupyterLab Extension",sidebar_label:"JupyterLab Extension",sidebar_position:4},o=void 0,l={},c=[{value:"How It Works",id:"how-it-works",level:2},{value:"Authentication",id:"authentication",level:2},{value:"Recommended: X.509 Proxy Certificate",id:"recommended-x509-proxy-certificate",level:3},{value:"Other Authentication Methods",id:"other-authentication-methods",level:3},{value:"Browsing the Rucio Catalog",id:"browsing-the-rucio-catalog",level:2},{value:"Using the Search Bar",id:"using-the-search-bar",level:3},{value:"Dynamic Scope Browsing",id:"dynamic-scope-browsing",level:3},{value:"Filtering Results",id:"filtering-results",level:3},{value:"Wildcard Search",id:"wildcard-search",level:3},{value:"Troubleshooting Data Availability",id:"troubleshooting-data-availability",level:3},{value:"Using Data in Notebooks",id:"using-data-in-notebooks",level:2},{value:"Session Configuration",id:"session-configuration",level:2},{value:"Terminal Usage",id:"terminal-usage",level:2},{value:"Advanced Settings",id:"advanced-settings",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"Rucio JupyterLab Extension"})," brings scientific data management directly into your JupyterLab environment, allowing you to discover, access, and analyze datasets from Rucio data lakes without leaving the notebook interface."]}),"\n",(0,t.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,t.jsx)(n.p,{children:"The extension integrates Rucio's data discovery and management capabilities into JupyterLab through a sidebar interface. When you spawn a JupyterLab session, you can choose to activate the extension and configure which experiment's Rucio cluster to connect to, as well as select a dedicated Rucio Storage Element (RSE) to be used as local storage for files."}),"\n",(0,t.jsx)(n.p,{children:"The extension leverages the existing Rucio Storage Elements (RSEs) provided by your experiment, typically available at Tier-0 infrastructure facilities."}),"\n",(0,t.jsx)(n.p,{children:"From the JupyterLab sidebar, you can:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Browse Rucio datasets"})," by scope and name"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Search for specific data"})," using pattern matching"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Replicate data with a single click"})," to make it available locally"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Inject file paths"})," directly into your notebooks as variables"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Authentication is flexible, supporting:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"X.509 proxy certificates"}),"\n",(0,t.jsx)(n.li,{children:"X.509 user certificates"}),"\n",(0,t.jsx)(n.li,{children:"Username and password"}),"\n",(0,t.jsx)(n.li,{children:"OpenID Connect (OIDC) tokens"}),"\n",(0,t.jsx)(n.li,{children:"Full Virtual Organization (VO) support"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,t.jsx)(n.p,{children:"Before using the extension, you need to authenticate with the Rucio cluster to access datasets."}),"\n",(0,t.jsx)(n.h3,{id:"recommended-x509-proxy-certificate",children:"Recommended: X.509 Proxy Certificate"}),"\n",(0,t.jsx)(n.p,{children:"If you have a grid proxy certificate, the extension can use it directly. This is the recommended authentication method."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Setup Steps:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Ensure your grid user certificate and key are present in the ",(0,t.jsx)(n.code,{children:"~/.globus"})," folder in your SWAN/JupyterLab session"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Execute the command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"voms-proxy-init --voms <your-experiment>\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can add additional arguments:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--cert"}),": Path to your certificate if not in ",(0,t.jsx)(n.code,{children:"~/.globus"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--key"}),": Path to your key if not in ",(0,t.jsx)(n.code,{children:"~/.globus"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--out"}),": Specify the output path for the proxy certificate"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"voms-proxy-init --cert ~/.globus/usercert.pem --key ~/.globus/userkey.pem --voms atlas --out /tmp/proxy.pem\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Click the \u2699\ufe0f (settings) button in the top right corner of the extension"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Configure your credentials:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Select ",(0,t.jsx)(n.strong,{children:"X.509 Proxy Certificate"})," from the Authentication dropdown"]}),"\n",(0,t.jsxs)(n.li,{children:["Enter the path to your proxy certificate in the ",(0,t.jsx)(n.strong,{children:"Proxy file path"})," field"]}),"\n",(0,t.jsxs)(n.li,{children:["Add your Rucio account in the ",(0,t.jsx)(n.strong,{children:"Account"})," field"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"Save Settings"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Switch to the ",(0,t.jsx)(n.strong,{children:"Explore"})," tab and start using the extension"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Disclaimer:"})," If you're using environment-specific software stacks (e.g., ",(0,t.jsx)(n.code,{children:"setupATLAS"}),"), you might already have a way to obtain a proxy certificate. Check with your experiment's documentation."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image",src:i(93466).A+"",width:"643",height:"543"})}),"\n",(0,t.jsx)(n.h3,{id:"other-authentication-methods",children:"Other Authentication Methods"}),"\n",(0,t.jsx)(n.p,{children:"The extension also supports:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Username & Password"}),": Direct authentication with username and password credentials"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"X.509 User Certificate"}),": Direct use of your X.509 certificate"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"OpenID Connect (OIDC) Tokens"}),": Token-based authentication (experimental)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"browsing-the-rucio-catalog",children:"Browsing the Rucio Catalog"}),"\n",(0,t.jsx)(n.h3,{id:"using-the-search-bar",children:"Using the Search Bar"}),"\n",(0,t.jsxs)(n.p,{children:["The search bar accepts items in the ",(0,t.jsx)(n.code,{children:"scope:name"})," format:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scope"}),": A namespace for organizing data (e.g., ",(0,t.jsx)(n.code,{children:"atlas"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"}),": The dataset or file name"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example searches:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"atlas:mc15_13TeV"})," - Search for datasets matching this pattern"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"atlas:*"})," - List all elements in the ",(0,t.jsx)(n.code,{children:"atlas"})," scope"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"experiment:test.root"})," - Find a specific file"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"dynamic-scope-browsing",children:"Dynamic Scope Browsing"}),"\n",(0,t.jsx)(n.p,{children:"To browse available scopes dynamically:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:"folder icon"})," to the right of the search bar"]}),"\n",(0,t.jsx)(n.li,{children:"A scope browser will appear showing available scopes"}),"\n",(0,t.jsx)(n.li,{children:"Select a scope to pre-fill the search bar with that scope"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"filtering-results",children:"Filtering Results"}),"\n",(0,t.jsx)(n.p,{children:"Entries can be filtered by:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type"}),": Container, Dataset, or File"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Metadata"}),": Additional metadata attributes"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"wildcard-search",children:"Wildcard Search"}),"\n",(0,t.jsxs)(n.p,{children:["The search method accepts the ",(0,t.jsx)(n.code,{children:"*"})," wildcard character. For example:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"example:*"})," - List all elements registered under the ",(0,t.jsx)(n.code,{children:"example"})," scope"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"atlas:mc*"})," - Find all items starting with ",(0,t.jsx)(n.code,{children:"mc"})," in the ",(0,t.jsx)(n.code,{children:"atlas"})," scope"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image",src:i(24418).A+"",width:"610",height:"486"})}),"\n",(0,t.jsx)(n.h3,{id:"troubleshooting-data-availability",children:"Troubleshooting Data Availability"}),"\n",(0,t.jsx)(n.p,{children:"If one or more files are not available on the RSE mounted in your JupyterLab session:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Check file replicas from the terminal:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"rucio list-file-replicas <scope:name>\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"This may lead to two scenarios:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario 1:"})," Files are replicated in an RSE mounted on your JupyterLab session"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Simply change your JupyterLab session configuration"}),"\n",(0,t.jsx)(n.li,{children:"Select the RSE that already has the dataset/files replicated"}),"\n",(0,t.jsx)(n.li,{children:"Restart your session if needed"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario 2:"})," Files are NOT replicated in any RSE mounted on your JupyterLab session"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Make Available"})," in the extension to trigger a replication rule"]}),"\n",(0,t.jsx)(n.li,{children:"Discuss with your experiment's conveners which RSE is best for replication"}),"\n",(0,t.jsx)(n.li,{children:"Ensure that RSE is mounted in your JupyterLab session BEFORE triggering the replication rule"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"using-data-in-notebooks",children:"Using Data in Notebooks"}),"\n",(0,t.jsx)(n.p,{children:"Once data becomes available on your session's RSE:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Open a notebook"})," in your JupyterLab session"]}),"\n",(0,t.jsxs)(n.li,{children:["An ",(0,t.jsx)(n.strong,{children:"Add to notebook"})," link appears in the extension sidebar"]}),"\n",(0,t.jsx)(n.li,{children:"Click the link to add the dataset to your notebook"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Provide a variable name"})," for the dataset (e.g., ",(0,t.jsx)(n.code,{children:"my_data"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Confirm"})]}),"\n",(0,t.jsx)(n.li,{children:"A new variable containing the path to the dataset is automatically added to your notebook"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image",src:i(29803).A+"",width:"672",height:"534"})}),"\n",(0,t.jsx)(n.p,{children:"The variable will contain the local file path where the data is available, allowing you to use it directly in your analysis code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# After adding data via the extension\nimport numpy as np\n\n# my_data is now a variable containing the path to your dataset\nwith open(my_data, 'r') as f:\n    data = np.load(f)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"session-configuration",children:"Session Configuration"}),"\n",(0,t.jsx)(n.p,{children:"When spawning a JupyterLab session:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"You can choose to activate the Rucio extension"}),"\n",(0,t.jsxs)(n.li,{children:["A configuration form allows you to select:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Which experiment's Rucio cluster to connect to"}),"\n",(0,t.jsx)(n.li,{children:"Which RSE to use as local storage for your files"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"terminal-usage",children:"Terminal Usage"}),"\n",(0,t.jsx)(n.p,{children:"To use Rucio commands in your terminal within the JupyterLab environment:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Open a ",(0,t.jsx)(n.strong,{children:"Terminal"})," window in JupyterLab"]}),"\n",(0,t.jsxs)(n.li,{children:["Verify authentication status:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"rucio whoami\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The extension configuration is different from the terminal client configuration. To have ",(0,t.jsx)(n.code,{children:"rucio"})," commands properly working in your terminal, follow your experiment's setup instructions (e.g., ",(0,t.jsx)(n.a,{href:"https://atlassoftwaredocs.web.cern.ch/internal-links/grid-tutorial/rucio-basics/",children:"ATLAS Rucio Guide"}),")."]}),"\n",(0,t.jsx)(n.h2,{id:"advanced-settings",children:"Advanced Settings"}),"\n",(0,t.jsx)(n.p,{children:"If you experience authentication errors:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Click \u2699\ufe0f (settings) and then ",(0,t.jsx)(n.strong,{children:"Show Advanced Settings"})]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Purge Cache"})," to erase any saved configuration"]}),"\n",(0,t.jsx)(n.li,{children:"Try authenticating again"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This can resolve issues where the extension shows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Authentication error. Perhaps you set an invalid credential?\n"})}),"\n",(0,t.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,t.jsx)(n.p,{children:"For more information on Rucio and the extension, visit:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/rucio/jupyterlab-extension",children:"Rucio JupyterLab Extension Repository"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},29803(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/rucio_jupyter_add-598a0e1c5fc7f9d7f3453c02fe11cd11.png"},93466(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/rucio_jupyter_auth-9b23af97c66b82baad0162466e59df50.png"},24418(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/rucio_jupyter_browse-7a95f2591effa13295dde6f2f34a40e0.png"},28453(e,n,i){i.d(n,{R:()=>a,x:()=>o});var s=i(96540);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);