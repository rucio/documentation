"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[45195],{28453:(e,s,i)=>{i.d(s,{R:()=>t,x:()=>o});var n=i(96540);const r={},c=n.createContext(r);function t(e){const s=n.useContext(c);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),n.createElement(c.Provider,{value:s},e.children)}},44498:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>a,frontMatter:()=>t,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"release-notes/38.0.0","title":"38.0.0","description":"Long Term Support (LTS)","source":"@site/../docs/release-notes/38.0.0.md","sourceDirName":"release-notes","slug":"/release-notes/38.0.0","permalink":"/documentation/release-notes/38.0.0","draft":false,"unlisted":false,"editUrl":"https://github.com/rucio/documentation/tree/main/docs/../docs/release-notes/38.0.0.md","tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"title":"38.0.0"}}');var r=i(74848),c=i(28453);const t={title:"38.0.0"},o=void 0,l={},d=[{value:"Long Term Support (LTS)",id:"long-term-support-lts",level:2},{value:"Important changes",id:"important-changes",level:2},{value:"Upgrade Instructions",id:"upgrade-instructions",level:2},{value:"General",id:"general",level:2},{value:"Features",id:"features",level:3},{value:"Enhancements",id:"enhancements",level:3},{value:"Bugs",id:"bugs",level:3},{value:"Clients",id:"clients",level:2},{value:"Features",id:"features-1",level:3},{value:"Enhancements",id:"enhancements-1",level:3},{value:"Bugs",id:"bugs-1",level:3}];function h(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"long-term-support-lts",children:"Long Term Support (LTS)"}),"\n",(0,r.jsxs)(s.p,{children:["This release marks the start of the 38 ",(0,r.jsx)(s.strong,{children:"Long Term Support (LTS)"})," release line. This release line will be supported with security and critical patches until at least ",(0,r.jsx)(s.strong,{children:"August 2027"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"important-changes",children:"Important changes"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Updated the default Data Identifier name expression schema to allow forward slashes (",(0,r.jsx)(s.code,{children:"/"}),"), providing partial support for unix-like paths. Examples of valid names now include ",(0,r.jsx)(s.code,{children:"/path/to/file"}),", ",(0,r.jsx)(s.code,{children:"dir/file"}),", and ",(0,r.jsx)(s.code,{children:"path/to/dir/"}),". If this needs to be expressively prohibited in your deployment, you need to setup a policy package excluding forward slashes in your name expression schema."]}),"\n",(0,r.jsxs)(s.li,{children:["Upgraded the oracle database interface from ",(0,r.jsx)(s.code,{children:"cx_oracle"})," (deprecated) to ",(0,r.jsx)(s.code,{children:"python-oracledb"}),". The use of Oracle in thick mode is enabled. Ensure the Oracle Instant Client (or full Oracle client) libraries are installed and visible in your environment. If the libraries can\u2019t be found, Rucio will continue in thin mode automatically."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"upgrade-instructions",children:"Upgrade Instructions"}),"\n",(0,r.jsxs)(s.p,{children:["This major release requires a database schema upgrade. Please consult the ",(0,r.jsx)(s.a,{href:"https://rucio.cern.ch/documentation/operator/database/#upgrading-and-downgrading-the-database-schema",children:"documentation"})," about upgrading your database schema."]}),"\n",(0,r.jsxs)(s.p,{children:["The following changes are necessary and are covered by the ",(0,r.jsx)(s.code,{children:"alembic upgrade head"})," command:"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Create ",(0,r.jsx)(s.code,{children:"dids_opendata"})," table, ",(0,r.jsx)(s.code,{children:"OPENDATA_DID_UPDATED_AT_IDX"})," index, ",(0,r.jsx)(s.code,{children:"OPENDATA_DID_CREATED_AT_IDX"})," index, ",(0,r.jsx)(s.code,{children:"OPENDATA_DID_STATE_IDX"})," index, ",(0,r.jsx)(s.code,{children:"OPENDATA_DID_STATE_UPDATED_AT_IDX"})," index, ",(0,r.jsx)(s.code,{children:"dids_opendata_doi"})," table, ",(0,r.jsx)(s.code,{children:"OPENDATA_DOI_UPDATED_AT_IDX"})," index, ",(0,r.jsx)(s.code,{children:"OPENDATA_DOI_CREATED_AT_IDX"})," index, ",(0,r.jsx)(s.code,{children:"dids_opendata_meta"})," table. (Alembic revision ",(0,r.jsx)(s.code,{children:"a62db546a1f1"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Moreover, any SQLAlchemy connection URLs (that previously looked like ",(0,r.jsx)(s.code,{children:"oracle://user:pass@dsn"})," or ",(0,r.jsx)(s.code,{children:"oracle+cx_oracle://user:pass@dsn"}),") ",(0,r.jsx)(s.strong,{children:"must"})," be updated to ",(0,r.jsx)(s.code,{children:"oracle+oracledb://user:pass@dsn"}),". Example update in commit [",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/6467",children:"#6467"}),"](",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/pull/7760/commits/15db1082abf04a950e705c1087b6db68e2782cd5",children:"https://github.com/rucio/rucio/pull/7760/commits/15db1082abf04a950e705c1087b6db68e2782cd5"}),")."]}),"\n",(0,r.jsx)(s.h2,{id:"general",children:"General"}),"\n",(0,r.jsx)(s.h3,{id:"features",children:"Features"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Authentication & Authorisation: OIDC Token authentication based on WLCG Disovery guideline ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7687",children:"#7687"})]}),"\n",(0,r.jsxs)(s.li,{children:["Replicas: Improve TEMP_UNAVAILABLE replica handling ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7666",children:"#7666"})]}),"\n",(0,r.jsxs)(s.li,{children:["Rules: Record rule error for STUCK rule if rse_expression excludes lock_rse in the meanwhile ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7538",children:"#7538"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"enhancements",children:"Enhancements"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Database: cx_oracle -> python-oracledb dependency upgrade ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/6467",children:"#6467"})]}),"\n",(0,r.jsxs)(s.li,{children:["Database: Do we need the ",(0,r.jsx)(s.code,{children:"destroy_database.py"}),"? ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7789",children:"#7789"})]}),"\n",(0,r.jsxs)(s.li,{children:["Database: Rename ",(0,r.jsx)(s.code,{children:"drop_everything"})," and ",(0,r.jsx)(s.code,{children:"destroy_database"})," from ",(0,r.jsx)(s.code,{children:"rucio.db.sqla.util"})," to better names ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7795",children:"#7795"})]}),"\n",(0,r.jsxs)(s.li,{children:["Database: Support Oracle thick client in Rucio ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7907",children:"#7907"})]}),"\n",(0,r.jsxs)(s.li,{children:["Docker & Kubernetes: Docker & Kubernetes: Add health\u2011checks to database containers in ",(0,r.jsx)(s.code,{children:"docker-compose"})," ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7909",children:"#7909"})]}),"\n",(0,r.jsxs)(s.li,{children:["Documentation: Merge ",(0,r.jsx)(s.code,{children:"Meta"})," and ",(0,r.jsx)(s.code,{children:"SingleMeta"})," web classes ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7779",children:"#7779"})]}),"\n",(0,r.jsxs)(s.li,{children:["Multi VO: Consider changing how policy package algorithms are registered, in order to avoid having to set them in the config ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7405",children:"#7405"})]}),"\n",(0,r.jsxs)(s.li,{children:["Client: add --csv option to rucio_admin/list_scopes and rucio/list_scopes ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7415",children:"#7415"})]}),"\n",(0,r.jsxs)(s.li,{children:["Better out of the box support for path-like DIDs ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7530",children:"#7530"})]}),"\n",(0,r.jsxs)(s.li,{children:["Opendata support in Rucio ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7559",children:"#7559"})]}),"\n",(0,r.jsxs)(s.li,{children:["Upgrade ",(0,r.jsx)(s.code,{children:"Typing Extensions"})," dependency to 4.14.0 ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7809",children:"#7809"})]}),"\n",(0,r.jsxs)(s.li,{children:["Missing Opendata oracle schema ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7885",children:"#7885"})]}),"\n",(0,r.jsxs)(s.li,{children:["Policies: Support slashes ",(0,r.jsx)(s.code,{children:"/"})," by default in DID names ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7691",children:"#7691"})]}),"\n",(0,r.jsxs)(s.li,{children:["REST & API: Remove legacy rule endpoints ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7813",children:"#7813"})]}),"\n",(0,r.jsxs)(s.li,{children:["REST & API: API: ",(0,r.jsx)(s.code,{children:"meta"})," endpoint should be removed in release 38 ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7821",children:"#7821"})]}),"\n",(0,r.jsxs)(s.li,{children:["Testing: ",(0,r.jsx)(s.code,{children:"docker_activate_rses"}),": migrate to new CLI syntax ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7892",children:"#7892"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"bugs",children:"Bugs"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Documentation: Incorrect rendering of DiracClient docstring ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7822",children:"#7822"})]}),"\n",(0,r.jsxs)(s.li,{children:["Missing analog for list-datasets-rse ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7801",children:"#7801"})]}),"\n",(0,r.jsxs)(s.li,{children:["REST & API: It seems like ",(0,r.jsx)(s.code,{children:"fileclient.py"})," is not usable ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7846",children:"#7846"})]}),"\n",(0,r.jsxs)(s.li,{children:["Testing: ",(0,r.jsx)(s.code,{children:"TEMPORARY_UNAVAILABLE"})," missing from ",(0,r.jsx)(s.code,{children:"generic"})," and ",(0,r.jsx)(s.code,{children:"generic_multi_vo"})," schema ",(0,r.jsx)(s.code,{children:"REPLICA_STATE"})," ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7787",children:"#7787"})]}),"\n",(0,r.jsxs)(s.li,{children:["Testing: ",(0,r.jsx)(s.code,{children:"skip_missing_elasticsearch_influxdb_in_env"})," tests are being skipped even in ",(0,r.jsx)(s.code,{children:"influxdb_elastic"})," contexts? ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7869",children:"#7869"})]}),"\n",(0,r.jsxs)(s.li,{children:["Testing: Fix ",(0,r.jsx)(s.code,{children:"test_hermes"}),", which was not being run properly due to ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7869",children:"#7869"})," ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7872",children:"#7872"})]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"clients",children:"Clients"}),"\n",(0,r.jsx)(s.h3,{id:"features-1",children:"Features"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Clients: Improve subscription disabling: Can't disable a subscription by setting its lifetime to 0 ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7784",children:"#7784"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"enhancements-1",children:"Enhancements"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:['Clients: Create definition for "error" and "failure" in the CLI ',(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7720",children:"#7720"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"bugs-1",children:"Bugs"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Clients: Rucio-Admin list-scopes and Rucio list-scopes inconsistent behavoir ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7316",children:"#7316"})]}),"\n",(0,r.jsxs)(s.li,{children:["Clients: Incorrect argument parsing for ",(0,r.jsx)(s.code,{children:"rucio rule list --account"})," ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7562",children:"#7562"})]}),"\n",(0,r.jsxs)(s.li,{children:["Clients: ",(0,r.jsx)(s.code,{children:"did content list"})," and ",(0,r.jsx)(s.code,{children:"did content history"})," do not enforce DID requirement ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7674",children:"#7674"})]}),"\n",(0,r.jsxs)(s.li,{children:["Clients: Cannot filter rules by account without specifying DID ",(0,r.jsx)(s.a,{href:"https://github.com/rucio/rucio/issues/7709",children:"#7709"})]}),"\n"]})]})}function a(e={}){const{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);