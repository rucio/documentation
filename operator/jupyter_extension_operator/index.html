<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-operator/jupyter_extension_operator" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Rucio JupyterLab Extension | Rucio Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rucio.github.io/documentation/operator/jupyter_extension_operator"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Rucio JupyterLab Extension | Rucio Documentation"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/documentation/img/android-chrome-512x512.png"><link data-rh="true" rel="canonical" href="https://rucio.github.io/documentation/operator/jupyter_extension_operator"><link data-rh="true" rel="alternate" href="https://rucio.github.io/documentation/operator/jupyter_extension_operator" hreflang="en"><link data-rh="true" rel="alternate" href="https://rucio.github.io/documentation/operator/jupyter_extension_operator" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NDP6TP9QYQ-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"JupyterLab Extension","item":"https://rucio.github.io/documentation/operator/jupyter_extension_operator"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="Rucio Documentation" href="/documentation/opensearch.xml">

<link rel="stylesheet" href="/documentation/css/custom.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,700&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik:400,500,700&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap">
<script src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/documentation/assets/css/styles.1dc85473.css">
<script src="/documentation/assets/js/runtime~main.7f58b07b.js" defer="defer"></script>
<script src="/documentation/assets/js/main.9ff4f3a0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/documentation/img/rucio_horizontaled_black.svg"><link rel="preload" as="image" href="/documentation/img/rucio_horizontaled_white.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/documentation/"><div class="navbar__logo"><img src="/documentation/img/rucio_horizontaled_black.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/documentation/img/rucio_horizontaled_white.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Rucio Documentation</b></a><a href="/documentation/html/client_api/accountclient.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Python Client API</a><a class="navbar__item navbar__link" href="/documentation/bin/rucio">Command Line Client</a><a href="/documentation/html/rest_api_doc.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">REST API</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/documentation/started/before_you_get_started">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/documentation/user/setting_up_the_rucio_client">User</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/documentation/operator/setting_up_demo">Operator</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/setting_up_demo">Setting up a Rucio demo environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/kubernetes">Setting up Rucio on Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/installing_server">Installing Rucio Server</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/documentation/operator/policy_packages/policy_packages_overview">Policy Packages</a><button aria-label="Expand sidebar category &#x27;Policy Packages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/installing_daemons">Installing Rucio Daemons</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/administration">Administration Tricks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/configuration_parameters">Configuration Parameters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/database">Database Operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/did_meta">DID Metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/documentation/operator/jupyter_extension_operator">JupyterLab Extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/k8s_guide">A Kubernetes tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/multi_vo_rucio">Multi-VO Rucio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/notifications">Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/open_data">Open Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/qos_rse_config">QoS RSE Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/s3_rse_config">S3 Storage Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/operator/suspicious-replica-recoverer">Suspicious Replica Recoverer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/documentation/operator_transfers/configure-rucio-fts3-plugins">Transfers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/documentation/bin/rucio-abacus-account">Executables</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/documentation/developer/dependency_management">Developer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/documentation/project_organisation">About Us</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Operator</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">JupyterLab Extension</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Rucio JupyterLab Extension</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>The Rucio JupyterLab Extension integrates Rucio&#x27;s capabilities directly into JupyterLab, allowing users to browse, search, and access datasets from Rucio instances without leaving their notebook environment.</p>
<p>The extension is composed of:</p>
<ul>
<li>A Python package <code>rucio_jupyterlab</code> for the server extension</li>
<li>An NPM package <code>rucio-jupyterlab</code> for the frontend extension</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h3>
<ul>
<li>JupyterLab &gt;= 3.0</li>
<li>Rucio Server &gt;= 1.28</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h3>
<p>You will need NodeJS to install the extension. For JupyterLab 4.x you will need NodeJS &gt;= 20 and &gt;= 14 for JupyterLab 3.x.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="jupyterlab-4x">JupyterLab 4.x<a href="#jupyterlab-4x" class="hash-link" aria-label="Direct link to JupyterLab 4.x" title="Direct link to JupyterLab 4.x">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pip install rucio-jupyterlab</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="jupyterlab-3x">JupyterLab 3.x<a href="#jupyterlab-3x" class="hash-link" aria-label="Direct link to JupyterLab 3.x" title="Direct link to JupyterLab 3.x">​</a></h4>
<p>For JupyterLab 3.x, please use the latest supported version.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pip install rucio-jupyterlab==0.10.0</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="operation-modes">Operation Modes<a href="#operation-modes" class="hash-link" aria-label="Direct link to Operation Modes" title="Direct link to Operation Modes">​</a></h2>
<p>The extension supports two distinct operation modes, which determine how files are made available to users.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="replica-mode">Replica Mode<a href="#replica-mode" class="hash-link" aria-label="Direct link to Replica Mode" title="Direct link to Replica Mode">​</a></h3>
<p>In this mode, files are transferred by Rucio to a storage mounted to the JupyterLab server. This is the recommended mode for shared environments.</p>
<p><strong>Requirements:</strong></p>
<ul>
<li>
<p>At least one Rucio instance</p>
</li>
<li>
<p>A storage system attached to the JupyterLab installation via FUSE (Filesystem in Userspace):</p>
<ul>
<li>The storage must be mounted on the host machine or Kubernetes nodes where JupyterLab pods run</li>
<li>Common FUSE implementations include:<!-- -->
<ul>
<li><strong>EOS</strong>: CERN&#x27;s disk-based storage system (via <a href="https://eos-docs.web.cern.ch/configuration/fuse.html" target="_blank" rel="noopener noreferrer"><code>eos fuse mount</code></a>)</li>
<li><strong>CephFS</strong>: Distributed filesystem (via <a href="https://docs.ceph.com/en/latest/man/8/ceph-fuse/" target="_blank" rel="noopener noreferrer"><code>ceph-fuse</code></a>)</li>
<li><strong>XRootD</strong>: High-performance data access protocol (via <a href="https://manpages.debian.org/testing/xrootd-fuse/xrootdfs.1.en.html" target="_blank" rel="noopener noreferrer"><code>xrootdfs</code></a>)</li>
</ul>
</li>
<li>The mounted storage must be registered as a Rucio Storage Element (RSE) in your Rucio instance</li>
<li>Should be shared among multiple users with read permissions for all users</li>
<li>It&#x27;s recommended that quotas be disabled, as the extension does not handle quota errors gracefully</li>
</ul>
<p>For mounting examples, see the <a href="https://github.com/vre-hub/vre/tree/master/infrastructure" target="_blank" rel="noopener noreferrer">ESCAPE VRE infrastructure documentation</a></p>
</li>
</ul>
<p><strong>Configuration Parameters:</strong></p>
<ul>
<li><code>destination_rse</code>: The name of the Rucio Storage Element mounted to the JupyterLab server</li>
<li><code>rse_mount_path</code>: The base path where the RSE is mounted</li>
<li><code>path_begins_at</code>: Index indicating which part of the PFN should be appended to the mount path (defaults to 0)</li>
<li><code>replication_rule_lifetime_days</code>: Optional lifetime for replication rules in days</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="download-mode">Download Mode<a href="#download-mode" class="hash-link" aria-label="Direct link to Download Mode" title="Direct link to Download Mode">​</a></h3>
<p>In this mode, the extension downloads files directly to the user&#x27;s home directory or another local storage location. This mode is useful when your JupyterLab installation does not have a Rucio Storage Element (RSE) mounted.</p>
<p><strong>Requirements:</strong></p>
<ul>
<li>At least one Rucio instance</li>
<li>Network access to Rucio Storage Elements (RSE) from the notebook server to download files</li>
<li>Sufficient local storage space available in the user directory for downloaded files</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2>
<p>The extension can be configured locally or remotely via a JSON configuration file.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-file-location">Configuration File Location<a href="#configuration-file-location" class="hash-link" aria-label="Direct link to Configuration File Location" title="Direct link to Configuration File Location">​</a></h3>
<p>The extension is configured via a <code>.json</code> file, usually located in <code>$HOME/.jupyter/</code> and named <code>jupyter_server_config.json</code>. This file must be present before the Jupyter server session starts and can be added via:</p>
<ul>
<li>Jupyter <code>before-notebook.d</code> hooks</li>
<li>Docker <code>CMD</code> instruction or entrypoint scripts</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="base-local-configuration">Base Local Configuration<a href="#base-local-configuration" class="hash-link" aria-label="Direct link to Base Local Configuration" title="Direct link to Base Local Configuration">​</a></h3>
<p>In your Jupyter configuration (e.g., <code>~/.jupyter/jupyter_server_config.json</code>), add the following snippet for a basic setup:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;RucioConfig&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;instances&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;experiment.cern.ch&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;display_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Experiment&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;rucio_base_url&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://rucio&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;rucio_auth_url&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://rucio&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;rucio_ca_cert&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/path/to/rucio_ca.pem&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;destination_rse&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;XRD1-EOS&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;rse_mount_path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/eos/rucio&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;path_begins_at&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;mode&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;replica&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-local-configuration">Advanced Local Configuration<a href="#advanced-local-configuration" class="hash-link" aria-label="Direct link to Advanced Local Configuration" title="Direct link to Advanced Local Configuration">​</a></h3>
<p>For production environments with multiple instances and advanced features:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;RucioConfig&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;instances&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;experiment1.cern.ch&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;display_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Experiment1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;rucio_base_url&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://rucio1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;rucio_auth_url&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://rucio1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;rucio_ca_cert&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/path/to/rucio_ca.pem&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;site_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CERN&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;vo&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;experiment1-vo&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;mode&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;replica&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;wildcard_enabled&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;oidc_auth&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;env&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;oidc_env_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;RUCIO_ACCESS_TOKEN1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;experiment2.cern.ch&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;display_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Experiment2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;rucio_base_url&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://rucio2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;rucio_auth_url&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://rucio2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;rucio_ca_cert&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/path/to/rucio_ca.pem&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;site_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CERN&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;vo&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;experiment2-vo&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;mode&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;replica&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;wildcard_enabled&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;oidc_auth&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;env&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;oidc_env_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;RUCIO_ACCESS_TOKEN2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;default_instance&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;experiment1.cern.ch&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;default_auth_type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;oidc&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;log_level&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;debug&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="remote-configuration">Remote Configuration<a href="#remote-configuration" class="hash-link" aria-label="Direct link to Remote Configuration" title="Direct link to Remote Configuration">​</a></h3>
<p>To use remote configuration, define instances locally with a reference to an external configuration file:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;RucioConfig&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;instances&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;experiment.cern.ch&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;display_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Experiment&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;$url&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://url-to-rucio-configuration/config.json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>In the JSON file pointed to by <code>$url</code>, use a configuration similar to:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;rucio_base_url&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://rucio&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;destination_rse&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;XRD1-EOS&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;rucio_auth_url&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://rucio&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;rucio_ca_cert&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/path/to/rucio_ca.pem&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;rse_mount_path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/eos/rucio&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;path_begins_at&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;mode&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;replica&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p><strong>Note:</strong> Attributes <code>name</code>, <code>display_name</code>, and <code>mode</code> must be defined locally (either in the configuration file or as environment variables). If an attribute is defined in both local and remote configuration, the local one takes precedence.</p>
<p>For a complete list of configuration parameters, see the next section or the <a href="https://github.com/rucio/jupyterlab-extension/blob/master/CONFIGURATION.md" target="_blank" rel="noopener noreferrer">Rucio JupyterLab Extension GitHub repository</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-parameters">Configuration Parameters<a href="#configuration-parameters" class="hash-link" aria-label="Direct link to Configuration Parameters" title="Direct link to Configuration Parameters">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="instance-configuration">Instance Configuration<a href="#instance-configuration" class="hash-link" aria-label="Direct link to Instance Configuration" title="Direct link to Instance Configuration">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="name---name">Name - <code>name</code><a href="#name---name" class="hash-link" aria-label="Direct link to name---name" title="Direct link to name---name">​</a></h4>
<p>A unique machine-readable identifier for the Rucio instance. It is recommended to use FQDN (Fully Qualified Domain Name). Must be declared locally in the configuration file or set via the <code>RUCIO_NAME</code> environment variable.</p>
<p>Example: <code>atlas.cern.ch</code>, <code>cms.cern.ch</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="display-name---display_name">Display Name - <code>display_name</code><a href="#display-name---display_name" class="hash-link" aria-label="Direct link to display-name---display_name" title="Direct link to display-name---display_name">​</a></h4>
<p>A user-friendly name displayed in the extension interface. Must be declared locally in the configuration file or set via the <code>RUCIO_DISPLAY_NAME</code> environment variable.</p>
<p>Example: <code>ATLAS</code>, <code>CMS</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mode---mode">Mode - <code>mode</code><a href="#mode---mode" class="hash-link" aria-label="Direct link to mode---mode" title="Direct link to mode---mode">​</a></h4>
<p>The operation mode of the extension. Must be declared locally in the configuration file or set via the <code>RUCIO_MODE</code> environment variable.</p>
<p>Allowed values:</p>
<ul>
<li><code>replica</code>: Files are transferred to a mounted storage</li>
<li><code>download</code>: Files are downloaded to user directory</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rucio-base-url---rucio_base_url">Rucio Base URL - <code>rucio_base_url</code><a href="#rucio-base-url---rucio_base_url" class="hash-link" aria-label="Direct link to rucio-base-url---rucio_base_url" title="Direct link to rucio-base-url---rucio_base_url">​</a></h4>
<p>Base URL for the Rucio instance accessible from the JupyterLab server, <strong>without trailing slash</strong>.</p>
<p>Example: <code>https://rucio</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rucio-auth-url---rucio_auth_url">Rucio Auth URL - <code>rucio_auth_url</code><a href="#rucio-auth-url---rucio_auth_url" class="hash-link" aria-label="Direct link to rucio-auth-url---rucio_auth_url" title="Direct link to rucio-auth-url---rucio_auth_url">​</a></h4>
<p>Base URL for the Rucio authentication service (if separate) accessible from the JupyterLab server, <strong>without trailing slash</strong>.</p>
<p>Example: <code>https://rucio-auth</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rucio-ca-certificate-file-path---rucio_ca_cert">Rucio CA Certificate File Path - <code>rucio_ca_cert</code><a href="#rucio-ca-certificate-file-path---rucio_ca_cert" class="hash-link" aria-label="Direct link to rucio-ca-certificate-file-path---rucio_ca_cert" title="Direct link to rucio-ca-certificate-file-path---rucio_ca_cert">​</a></h4>
<p>Path to Rucio server certificate file, accessible via filesystem mount. Optional in Replica mode, mandatory in Download mode.</p>
<p>Example: <code>/opt/rucio/rucio_ca.pem</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="app-id---app_id">App ID - <code>app_id</code><a href="#app-id---app_id" class="hash-link" aria-label="Direct link to app-id---app_id" title="Direct link to app-id---app_id">​</a></h4>
<p>Rucio App ID. Optional.</p>
<p>Example: <code>swan</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="site-name---site_name">Site Name - <code>site_name</code><a href="#site-name---site_name" class="hash-link" aria-label="Direct link to site-name---site_name" title="Direct link to site-name---site_name">​</a></h4>
<p>Site name of the JupyterLab instance. Optional. Allows Rucio to determine whether to serve a proxied PFN or not.</p>
<p>Example: <code>ATLAS</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="virtual-organizations">Virtual Organizations<a href="#virtual-organizations" class="hash-link" aria-label="Direct link to Virtual Organizations" title="Direct link to Virtual Organizations">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="vo-name---vo">VO Name - <code>vo</code><a href="#vo-name---vo" class="hash-link" aria-label="Direct link to vo-name---vo" title="Direct link to vo-name---vo">​</a></h4>
<p>VO (Virtual Organization) of the instance. Optional, for use in multi-VO installations only. If VOMS is enabled, this value will be supplied as <code>--voms</code> option when invoking <code>voms-proxy-init</code>.</p>
<p>Example: <code>def</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="voms-enabled---voms_enabled">VOMS Enabled - <code>voms_enabled</code><a href="#voms-enabled---voms_enabled" class="hash-link" aria-label="Direct link to voms-enabled---voms_enabled" title="Direct link to voms-enabled---voms_enabled">​</a></h4>
<p>Boolean flag to enable VOMS proxy certificate generation. When set to <code>true</code>, the extension uses <code>voms-proxy-init</code> to generate a proxy certificate for authenticated RSE access.</p>
<p>Default: <code>false</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="voms-certdir-path---voms_certdir_path">VOMS <code>certdir</code> Path - <code>voms_certdir_path</code><a href="#voms-certdir-path---voms_certdir_path" class="hash-link" aria-label="Direct link to voms-certdir-path---voms_certdir_path" title="Direct link to voms-certdir-path---voms_certdir_path">​</a></h4>
<p>If VOMS is enabled, sets the <code>--certdir</code> option for <code>voms-proxy-init</code>. Refer to <code>voms-proxy-init</code> documentation.</p>
<p>Example: <code>/etc/grid-security/certificates</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="voms-vomses-path---voms_vomses_path">VOMS <code>vomses</code> Path - <code>voms_vomses_path</code><a href="#voms-vomses-path---voms_vomses_path" class="hash-link" aria-label="Direct link to voms-vomses-path---voms_vomses_path" title="Direct link to voms-vomses-path---voms_vomses_path">​</a></h4>
<p>If VOMS is enabled, sets the <code>--vomses</code> option for <code>voms-proxy-init</code>. Refer to <code>voms-proxy-init</code> documentation.</p>
<p>Example: <code>/etc/grid-security/vomses</code></p>
<p><strong>WARNING:</strong> Earlier versions of <code>voms-proxy-init</code> do not support the <code>--vomses</code> option. In that case, this option must be omitted.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-elements-and-search">Storage Elements and Search<a href="#storage-elements-and-search" class="hash-link" aria-label="Direct link to Storage Elements and Search" title="Direct link to Storage Elements and Search">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="destination-rse---destination_rse">Destination RSE - <code>destination_rse</code><a href="#destination-rse---destination_rse" class="hash-link" aria-label="Direct link to destination-rse---destination_rse" title="Direct link to destination-rse---destination_rse">​</a></h4>
<p>The name of the Rucio Storage Element mounted to the JupyterLab server. Mandatory in Replica mode.</p>
<p>Example: <code>SWAN-EOS</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rse-mount-path---rse_mount_path">RSE Mount Path - <code>rse_mount_path</code><a href="#rse-mount-path---rse_mount_path" class="hash-link" aria-label="Direct link to rse-mount-path---rse_mount_path" title="Direct link to rse-mount-path---rse_mount_path">​</a></h4>
<p>The base path where the RSE is mounted to the server. Mandatory in Replica mode.</p>
<p>Example: <code>/eos/rucio</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="file-path-starting-index---path_begins_at">File Path Starting Index - <code>path_begins_at</code><a href="#file-path-starting-index---path_begins_at" class="hash-link" aria-label="Direct link to file-path-starting-index---path_begins_at" title="Direct link to file-path-starting-index---path_begins_at">​</a></h4>
<p>This configuration indicates which part of the PFN (Physical File Name) should be appended to the mount path. Only applicable in Replica mode. Defaults to <code>0</code>.</p>
<p><strong>Example:</strong> For a PFN of <code>root://xrd1:1094//rucio/test/49/ad/f1.txt</code> and mount path <code>/eos/rucio</code>:</p>
<ul>
<li><code>path_begins_at: 1</code> means start from the 2nd slash in the PFN</li>
<li>Resulting path: <code>/eos/rucio/test/49/ad/f1.txt</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="replication-rule-lifetime-in-days---replication_rule_lifetime_days">Replication Rule Lifetime (in days) - <code>replication_rule_lifetime_days</code><a href="#replication-rule-lifetime-in-days---replication_rule_lifetime_days" class="hash-link" aria-label="Direct link to replication-rule-lifetime-in-days---replication_rule_lifetime_days" title="Direct link to replication-rule-lifetime-in-days---replication_rule_lifetime_days">​</a></h4>
<p>Replication rule lifetime in days. Optional, only applicable in Replica mode.</p>
<p>Example: <code>365</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="wildcard-search-enabled---wildcard_enabled">Wildcard Search Enabled - <code>wildcard_enabled</code><a href="#wildcard-search-enabled---wildcard_enabled" class="hash-link" aria-label="Direct link to wildcard-search-enabled---wildcard_enabled" title="Direct link to wildcard-search-enabled---wildcard_enabled">​</a></h4>
<p>Boolean flag to enable wildcard DID (Dataset Identifier) search. When enabled, users can search using wildcard patterns like <code>scope:*</code>.</p>
<p>Default: <code>false</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-configuration">Authentication Configuration<a href="#authentication-configuration" class="hash-link" aria-label="Direct link to Authentication Configuration" title="Direct link to Authentication Configuration">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="openid-connect-auth-source---oidc_auth">OpenID Connect Auth Source - <code>oidc_auth</code><a href="#openid-connect-auth-source---oidc_auth" class="hash-link" aria-label="Direct link to openid-connect-auth-source---oidc_auth" title="Direct link to openid-connect-auth-source---oidc_auth">​</a></h4>
<p>Specifies where the extension retrieves the OIDC token. Optional.</p>
<p>Allowed values:</p>
<ul>
<li><code>file</code>: Read token from a file</li>
<li><code>env</code>: Read token from an environment variable</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="openid-connect-token-filename---oidc_file_name">OpenID Connect Token Filename - <code>oidc_file_name</code><a href="#openid-connect-token-filename---oidc_file_name" class="hash-link" aria-label="Direct link to openid-connect-token-filename---oidc_file_name" title="Direct link to openid-connect-token-filename---oidc_file_name">​</a></h4>
<p>Specifies an absolute path to a file containing the OIDC access token. Required if <code>oidc_auth</code> is set to <code>file</code>.</p>
<p>Example: <code>/var/run/secrets/oidc_token</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="openid-connect-token-environment-variable-name---oidc_env_name">OpenID Connect Token Environment Variable Name - <code>oidc_env_name</code><a href="#openid-connect-token-environment-variable-name---oidc_env_name" class="hash-link" aria-label="Direct link to openid-connect-token-environment-variable-name---oidc_env_name" title="Direct link to openid-connect-token-environment-variable-name---oidc_env_name">​</a></h4>
<p>Specifies the environment variable name containing the OIDC access token. Required if <code>oidc_auth</code> is set to <code>env</code>.</p>
<p>Example: <code>RUCIO_ACCESS_TOKEN</code></p>
<p><strong>IMPORTANT:</strong> The <code>oidc_auth</code> parameter and either <code>oidc_file_name</code> or <code>oidc_env_name</code> are necessary if OIDC token authentication is to be used.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="global-configuration">Global Configuration<a href="#global-configuration" class="hash-link" aria-label="Direct link to Global Configuration" title="Direct link to Global Configuration">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="default-instance---default_instance">Default Instance - <code>default_instance</code><a href="#default-instance---default_instance" class="hash-link" aria-label="Direct link to default-instance---default_instance" title="Direct link to default-instance---default_instance">​</a></h4>
<p>The instance to be pre-selected in the settings menu of the extension.</p>
<p>Example: <code>atlas.cern.ch</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="default-authentication-type---default_auth_type">Default Authentication Type - <code>default_auth_type</code><a href="#default-authentication-type---default_auth_type" class="hash-link" aria-label="Direct link to default-authentication-type---default_auth_type" title="Direct link to default-authentication-type---default_auth_type">​</a></h4>
<p>Default authentication method. Possible values:</p>
<ul>
<li><code>oidc</code>: OpenID Connect tokens</li>
<li><code>x509</code>: X.509 user certificate</li>
<li><code>x509_proxy</code>: X.509 proxy certificate</li>
<li><code>userpass</code>: Username and password</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="logging-level---log_level">Logging Level - <code>log_level</code><a href="#logging-level---log_level" class="hash-link" aria-label="Direct link to logging-level---log_level" title="Direct link to logging-level---log_level">​</a></h4>
<p>Specifies the verbosity of logs. Possible values:</p>
<ul>
<li><code>debug</code>: Most verbose</li>
<li><code>info</code>: Informational messages</li>
<li><code>warning</code>: Warnings and errors</li>
<li><code>error</code>: Errors only</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ipython-kernel-extension">IPython Kernel Extension<a href="#ipython-kernel-extension" class="hash-link" aria-label="Direct link to IPython Kernel Extension" title="Direct link to IPython Kernel Extension">​</a></h2>
<p>To allow users to access file paths from within notebooks, the kernel extension must be enabled.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="manual-activation">Manual Activation<a href="#manual-activation" class="hash-link" aria-label="Direct link to Manual Activation" title="Direct link to Manual Activation">​</a></h3>
<p>To enable the kernel extension inside a notebook, use the IPython magic:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain">load_ext rucio_jupyterlab</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">kernels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ipython</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-activation">Automatic Activation<a href="#automatic-activation" class="hash-link" aria-label="Direct link to Automatic Activation" title="Direct link to Automatic Activation">​</a></h3>
<p>To enable it by default for all users, add the following to the IPython configuration (e.g., <code>~/.ipython/profile_default/ipython_kernel_config.py</code>):</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">IPKernelApp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">extensions </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;rucio_jupyterlab.kernels.ipython&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="openid-connect-authentication-setup">OpenID Connect Authentication Setup<a href="#openid-connect-authentication-setup" class="hash-link" aria-label="Direct link to OpenID Connect Authentication Setup" title="Direct link to OpenID Connect Authentication Setup">​</a></h2>
<p>OIDC authentication requires special configuration at the operator level, as it cannot be configured by users directly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="important-notes">Important Notes<a href="#important-notes" class="hash-link" aria-label="Direct link to Important Notes" title="Direct link to Important Notes">​</a></h3>
<ul>
<li>Users will only see the &quot;OpenID Connect&quot; authentication option if OIDC is properly configured by operators</li>
<li>The extension does not handle user authentication directly; the OIDC token must be obtained through an external mechanism</li>
<li>In multi-user setups with JupyterHub, operators must make the OIDC token accessible via file or environment variable</li>
<li>JupyterHub must implement periodic token refresh to prevent expiration during active sessions</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-jupyterhub-with-oidc">Configuring JupyterHub with OIDC<a href="#configuring-jupyterhub-with-oidc" class="hash-link" aria-label="Direct link to Configuring JupyterHub with OIDC" title="Direct link to Configuring JupyterHub with OIDC">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="single-user-dockerfile-and-variables">Single User Dockerfile and Variables<a href="#single-user-dockerfile-and-variables" class="hash-link" aria-label="Direct link to Single User Dockerfile and Variables" title="Direct link to Single User Dockerfile and Variables">​</a></h4>
<p>The single-user container image must include:</p>
<ol>
<li>The Rucio JupyterLab extension installed</li>
<li>OIDC token environment variables properly configured</li>
<li>A configuration script (like <code>configure.py</code>) to write environment variables to Jupyter configuration</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="jupyterhub-helm-chart-configuration">JupyterHub Helm Chart Configuration<a href="#jupyterhub-helm-chart-configuration" class="hash-link" aria-label="Direct link to JupyterHub Helm Chart Configuration" title="Direct link to JupyterHub Helm Chart Configuration">​</a></h4>
<p>For Kubernetes deployments using the <a href="https://z2jh.jupyter.org/en/stable/" target="_blank" rel="noopener noreferrer">Zero to JupyterHub</a> Helm Chart:</p>
<p><strong>1. Set the custom single-user image:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">singleuser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &lt;image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">&lt;image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">tag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><br></span></code></pre></div></div>
<p><strong>2. Add a custom authenticator to <code>hub.extraConfig</code>:</strong></p>
<p>The <code>hub.extraConfig</code> section allows you to inject custom Python code into the JupyterHub configuration. Here, we define a custom authenticator class that handles OIDC token exchange with Rucio. This authenticator intercepts the user authentication flow, exchanges the OIDC token for a Rucio-specific token, and injects it into the spawned user environment.</p>
<p>See an example implementation in the <a href="https://github.com/vre-hub/vre/blob/527982d0a9beeb6098dbb9f73e16ff65f4796b88/infrastructure/cluster/flux/jhub/jhub-release.yaml#L71" target="_blank" rel="noopener noreferrer">ESCAPE VRE Helm Chart</a>.</p>
<p><strong>3. Add authenticator configuration to <code>hub.config</code>:</strong></p>
<p>The <code>hub.config</code> section configures the custom <code>RucioAuthenticator</code> class defined above. These settings specify the OIDC provider endpoints and client credentials needed for authentication. The authenticator uses these values to communicate with your identity provider and perform token exchanges.</p>
<p>See configuration example in the <a href="https://github.com/vre-hub/vre/blob/527982d0a9beeb6098dbb9f73e16ff65f4796b88/infrastructure/cluster/flux/jhub/jhub-release.yaml#L55" target="_blank" rel="noopener noreferrer">ESCAPE VRE Helm Chart</a>.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">hub</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RucioAuthenticator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">client_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &lt;your</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">client_secret</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &lt;your</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">secret</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">authorize_url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &lt;your</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">auth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">token_url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &lt;your</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">token</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">userdata_url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &lt;your</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">userinfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">username_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> preferred_username</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> openid</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> profile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> email</span><br></span></code></pre></div></div>
<p><strong>4. Add extension parameters to <code>singleuser.extraEnv</code>:</strong></p>
<p>The <code>singleuser.extraEnv</code> section defines environment variables that will be injected into each user&#x27;s JupyterLab pod. The Rucio JupyterLab extension reads these variables to configure itself automatically. This approach is particularly useful in containerized environments where configuration via environment variables is preferred over static configuration files.</p>
<p>See environment configuration in the <a href="https://github.com/vre-hub/vre/blob/527982d0a9beeb6098dbb9f73e16ff65f4796b88/infrastructure/cluster/flux/jhub/jhub-release.yaml#L211" target="_blank" rel="noopener noreferrer">ESCAPE VRE Helm Chart</a>.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">singleuser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">extraEnv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_MODE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;replica&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_WILDCARD_ENABLED</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_BASE_URL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-rucio-url&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_AUTH_URL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-rucio-auth-url&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_WEBUI_URL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-rucio-ui-url&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_DISPLAY_NAME</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-rucio-instance-display-name&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_NAME</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-rucio-instance-name&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_SITE_NAME</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-rucio-instance-site-name&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_OIDC_AUTH</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;env&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_OIDC_ENV_NAME</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;RUCIO_ACCESS_TOKEN&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_DEFAULT_AUTH_TYPE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;oidc&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_LOG_LEVEL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;warning&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_OAUTH_ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-rucio-oauth-id&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_DEFAULT_INSTANCE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-rucio-instance-name&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_DESTINATION_RSE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;EOS RSE&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_RSE_MOUNT_PATH</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/eos/eos-rse&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_PATH_BEGINS_AT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;4&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">RUCIO_CA_CERT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-rucio-ca-file-path&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">OAUTH2_TOKEN</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;FILE:/tmp/eos_oauth.token&quot;</span><br></span></code></pre></div></div>
<p><strong>5. Build the Docker image and install the Helm Chart with the specified values.</strong></p>
<p><em>Note: This configuration works in replica mode and maps an EOS RSE as the target RSE, FUSE mounted on the JupyterHub nodes.</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="further-reading">Further Reading<a href="#further-reading" class="hash-link" aria-label="Direct link to Further Reading" title="Direct link to Further Reading">​</a></h2>
<p>For more detailed information on the Rucio JupyterLab Extension, visit the <a href="https://github.com/rucio/jupyterlab-extension" target="_blank" rel="noopener noreferrer">rucio/jupyterlab-extension</a> GitHub repository.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/rucio/documentation/tree/main/docs/../docs/operator/jupyter_extension_operator.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-12-16T14:46:23.000Z" itemprop="dateModified">Dec 16, 2025</time></b> by <b>rdimaio</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/documentation/operator/did_meta"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DID Metadata</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/documentation/operator/k8s_guide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">A Kubernetes tutorial</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li></ul></li><li><a href="#operation-modes" class="table-of-contents__link toc-highlight">Operation Modes</a><ul><li><a href="#replica-mode" class="table-of-contents__link toc-highlight">Replica Mode</a></li><li><a href="#download-mode" class="table-of-contents__link toc-highlight">Download Mode</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#configuration-file-location" class="table-of-contents__link toc-highlight">Configuration File Location</a></li><li><a href="#base-local-configuration" class="table-of-contents__link toc-highlight">Base Local Configuration</a></li><li><a href="#advanced-local-configuration" class="table-of-contents__link toc-highlight">Advanced Local Configuration</a></li><li><a href="#remote-configuration" class="table-of-contents__link toc-highlight">Remote Configuration</a></li></ul></li><li><a href="#configuration-parameters" class="table-of-contents__link toc-highlight">Configuration Parameters</a><ul><li><a href="#instance-configuration" class="table-of-contents__link toc-highlight">Instance Configuration</a></li><li><a href="#virtual-organizations" class="table-of-contents__link toc-highlight">Virtual Organizations</a></li><li><a href="#storage-elements-and-search" class="table-of-contents__link toc-highlight">Storage Elements and Search</a></li><li><a href="#authentication-configuration" class="table-of-contents__link toc-highlight">Authentication Configuration</a></li><li><a href="#global-configuration" class="table-of-contents__link toc-highlight">Global Configuration</a></li></ul></li><li><a href="#ipython-kernel-extension" class="table-of-contents__link toc-highlight">IPython Kernel Extension</a><ul><li><a href="#manual-activation" class="table-of-contents__link toc-highlight">Manual Activation</a></li><li><a href="#automatic-activation" class="table-of-contents__link toc-highlight">Automatic Activation</a></li></ul></li><li><a href="#openid-connect-authentication-setup" class="table-of-contents__link toc-highlight">OpenID Connect Authentication Setup</a><ul><li><a href="#important-notes" class="table-of-contents__link toc-highlight">Important Notes</a></li><li><a href="#configuring-jupyterhub-with-oidc" class="table-of-contents__link toc-highlight">Configuring JupyterHub with OIDC</a></li></ul></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further Reading</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/documentation/img/rucio_horizontaled_black.svg" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/documentation/img/rucio_horizontaled_white.svg" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright © 2023 CERN</div></div></div></footer></div>
</body>
</html>